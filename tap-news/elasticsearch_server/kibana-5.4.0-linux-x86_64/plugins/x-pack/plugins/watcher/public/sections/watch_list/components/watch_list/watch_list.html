<kbn-management-app section="elasticsearch/watcher">
  <div class="kuiViewContent kuiViewContent--constrainedWidth">
    <forbidden-message ng-if="watchList.forbidden">
      You do not have permission to manage watches.
    </forbidden-message>

    <div
      ng-if="!watchList.forbidden"
      class="kuiViewContentItem kuiControlledTable kuiVerticalRhythm"
    >
      <div class="kuiToolBar">
        <div class="kuiToolBarSearch">
          <tool-bar-search-box
            query="watchList.query"
            on-query-change="watchList.onQueryChange"
          ></tool-bar-search-box>
        </div>

        <div class="kuiToolBarSection">
          <a
            class="kuiButton kuiButton--primary"
            href="#/management/elasticsearch/watcher/watches/new-watch"
          >
            Add
          </a>
          <button
            class="kuiButton kuiButton--danger"
            ng-disabled="!watchList.hasSelectedWatches"
            ng-click="watchList.onSelectedWatchesDelete()"
          >
            Delete
          </button>
        </div>

        <div class="kuiToolBarSection">
          <tool-bar-pager-text
            start-item="watchList.pager.startItem"
            end-item="watchList.pager.endItem"
            total-items="watchList.pager.totalItems"
          ></tool-bar-pager-text>
          <tool-bar-pager-buttons
            has-previous-page="watchList.pager.hasPreviousPage"
            has-next-page="watchList.pager.hasNextPage"
            on-page-next="watchList.onPageNext"
            on-page-previous="watchList.onPagePrevious"
          ></tool-bar-pager-buttons>
        </div>
      </div>

      <watch-table
        watches="watchList.pageOfWatches"
        watches-being-deleted="watchList.watchesBeingDeleted"
        sort-field="watchList.sortField"
        sort-reverse="watchList.sortReverse"
        on-sort-change="watchList.onSortChange"
        on-select-change="watchList.onSelectedChange"
        ng-show="watchList.hasPageOfWatches"
      >
      </watch-table>

      <no-items
        items-name="watches"
        ng-show="!watchList.hasPageOfWatches"
      ></no-items>

      <div class="kuiToolBarFooter">
        <div class="kuiToolBarFooterSection">
          <tool-bar-selected-count
            count="watchList.selectedWatches.length"
            singular-name="watch"
            plural-name="watches"
            ng-show="watchList.hasSelectedWatches"
          ></tool-bar-selected-count>
        </div>

        <div class="kuiToolBarFooterSection">
          <tool-bar-pager-text
            start-item="watchList.pager.startItem"
            end-item="watchList.pager.endItem"
            total-items="watchList.pager.totalItems"
          ></tool-bar-pager-text>
          <tool-bar-pager-buttons
            has-previous-page="watchList.pager.hasPreviousPage"
            has-next-page="watchList.pager.hasNextPage"
            on-page-next="watchList.onPageNext"
            on-page-previous="watchList.onPagePrevious"
          ></tool-bar-pager-buttons>
        </div>
      </div>
    </div>
  </div>
</kbn-management-app>
